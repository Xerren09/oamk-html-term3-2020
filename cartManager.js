const _data = [
    {
        name: 'AMD Radeon 5700 XT',
        price: '459',
        image: 'resources/Images/251223-b324043_300x300.jpg',
        description: [
            'Clock frequency:',
            '- Boost: Max 2010 MHz',
            '- Game: 1905 MHz',
            '- Base: 1770 MHz',
            'Cores: 2560 (40 CU)',
            'Memory Capacity: 8GB GDDR6',
            'Speed: 14 Gbps',
            'Memory bus: 256-bit',
            'Connections',
            '1 x HDMI 2.0b',
            '3 x DisplayPort (v1.4)',
            'Bus: PCI Express 4.0',
            'Dimensions: 300 x 132 x 53 mm',
            'Recommended power supply size: 700W',
            'Power connections: 2 x 8-pin'
        ]
    },

    {
        name: 'ASUS TUF GAMING RTX 3080 10G',
        price: '899',
        image: 'resources/Images/rtx3080tuf.jpg',
        description: [
            'Graphics engine: NVIDIA® GeForce RTX™ 3080',
            'Bus standard: PCI Express 4.0',
            'OpenGL: OpenGL®4.6',
            'Video memory: GGDDR6X',
            'Memory speed: 19 Gbps',
            'Memory interface: 320-bit',
            'Engine clock: OC Mode - 1740 MHz (Boost Clock)',
            'Gaming Mode (Default) - GPU Boost Clock : 1710 MHz , GPU Base Clock : 1440 MHz',
            'CUDA core: 8704',
            'Resolution: Digital max resolution: 7680x4320',
            'Interface: 2x HDMI 2.1 port, 3x DisplayPort 1.4a, HDCP support',
            'Maximum displays supported: 4',
            'NVlink support: No',
            'Recommended PSU: 850W',
            'Power connectors: 2 x 8-pin',
            'Accessories: 1 x Collection card, 1 x Speedsetup manual',
            '1 x TUF certificate of Reliability'
        ]
    },

    {
        name: 'MSI GeForce RTX 3070 Ventus 3X OC',
        price: '619',
        image: 'resources/Images/302003-b303045_300x300.jpg',
        description: [
            'Clock frequency:',
            '- Boost: Max 2010 MHz',
            '- Game: 1905 MHz',
            '- Base: 1770 MHz',
            'Cores: 2560 (40 CU)',
            'Memory Capacity: 8GB GDDR6',
            'Speed: 14 Gbps',
            'Memory bus: 256-bit',
            'Connections',
            '1 x HDMI 2.0b',
            '3 x DisplayPort (v1.4)',
            'Bus: PCI Express 4.0',
            'Dimensions: 300 x 132 x 53 mm',
            'Recommended power supply size: 700W',
            'Power connections: 2 x 8-pin'
        ]
    },

    {
        name: 'ASUS GeForce RTX 3070 8GB GDDR6 DUAL OC',
        price: '619',
        image: 'resources/Images/302003-b303045_300x300.jpg',
        description: [
            'CUDA cores: 5888',
            'Clock frequency:',
            '- OC mode: 1800 MHz (Boost)',
            '- Gaming mode: 1770 MHz (Boost)',
            'Memory size: 8GB GDDR6',
            'Memory bus: 256-bit',
            'Speed: 14Gbps',
            'Connections',
            '- 2 x HDMI 2.1',
            '- 3 x DisplayPort 1.4a',
            'Bus: PCIE 4.0',
            'Dimensions: 267 x 135 x 52 mm / 2.7 slots',
            'Weight: 1.094 kg',
            'OpenGL: Open GL 4.6',
            'HDCP support: HDCP 2.3',
            'Maximum digital resolution: 7680 x 4320',
            'Maximum supported impressions: 4',
            'Recommended power supply size: 750W',
            'Power connections: 2 x 8-pin '
        ]
    },

    {
        name: 'GeForce RTX3070 GamingPro',
        price: '639',
        image: 'resources/Images/302003-b303045_300x300.jpg',
        description: [
            'CUDA cores: 5888',
            'Clock frequency: 1500 MHz / 1770 MHz (Boost)',
            'Memory size: 8GB GDDR6',
            'Memory bus: 256-bit',
            'Clock speed: 14 Gbps',
            'Bandwidth: 448 GB / s',
            'Connections:',
            '- HDMI 2.1 (max. 7680 x 4320 @ 60Hz)',
            '- 3 x DisplayPort 1.4a (max. 7680 x 430 @ 60Hz)',
            'Bus: PCI Express 4.0 16x',
            'Dimensions: 294 x 112 x 60 mm / 2.7 slots',
            'Recommended power supply size: 650W',
            'Power connections: 2 x 8-pin '
        ]
    },

    {
        name: 'ASUS TUF GAMING GeForce RTX™ 3070 OC Edition 8GB GDDR6',
        price: '669',
        image: 'resources/Images/302003-b303045_300x300.jpg',
        description: [
            'CUDA cores: 4864',
            'Clock frequency:',
            '- OC Mode: 1785 MHz (Boost Clock)',
            '- Gaming Mode: 1755 MHz (Boost Clock)',
            'Memory size: 8GB GDDR6',
            'Memory bus: 256-bit',
            'Clock speed: 14 Gbps',
            'Connections',
            '- 2 x HDMI 2.1',
            '- 3 x DisplayPort 1.4a',
            'Bus: PCI-E 4.0 x16',
            'Dimensions: 301 x 143 x 54 mm / 2.7 slots',
            'Weight: 1140g',
            'Recommended power supply size: 750W',
            'Power connections: 1 x 8-pin '
        ]
    },

    {
        name: 'EVGA GeForce RTX 3070 XC3 BLACK',
        price: '619',
        image: 'resources/Images/302003-b303045_300x300.jpg',
        description: [
            'CUDA cores: 5888',
            'Clock frequency: 1725 MHz (Boost)',
            'Memory size: 8GB GDDR6',
            'Memory bus: 256-bit',
            'Clock frequency: 14,000 MHz (effective)',
            'Bandwidth: 448 GB / s',
            'Connections',
            '- 1 x HDMI 2.1',
            '- 3 x DisplayPort 1.4a',
            'Bus: PCI-E 4.0 x16',
            'Dimensions: 111.15 x 285.37 mm | 2.2 Slots',
            'Recommended power supply size: 650W',
            'Power connections: 2 x 8-pin',
            'Cooling: iCX3',
            'LED Logo: ARGB '
        ]
    },

    {
        name: 'ASUS ROG STRIX RTX3090 O24G GAMING',
        price: '1889',
        image: 'resources/Images/302003-b303045_300x300.jpg',
        description: [
            'CUDA cores: 10496',
            'Clock frequency:',
            '- OC mode: 1890 MHz (Boost)',
            '- Gaming mode: 1860 MHz (Boost)',
            'Memory size: 24GB GDDR6X',
            'Memory bus:',
            'Speed: 19.5Gbps',
            'Connections',
            '- 2 x HDMI 2.1',
            '- 3 x DisplayPort 1.4a',
            'Bus: PCIE 4.0',
            'Dimensions: 318.5 x 140.1 x 57.78 mm / 2.9 slots',
            'Weight: 1.77 kg',
            'OpenGL: Open GL 4.6',
            'HDCP support: HDCP 2.3',
            'Maximum digital resolution: 7680 x 4320',
            'Maximum supported impressions: 4',
            'NVLINK Support: Yes',
            'Recommended power supply size: 850W',
            'Power connections: 3 x 8-pin '
        ]
    },

    {
        name: 'ASUS GeForce RTX 3070 8GB GDDR6 ROG STRIX GAMING',
        price: '719',
        image: 'resources/Images/302003-b303045_300x300.jpg',
        description: [
            'CUDA cores: 5888',
            'Clock frequency:',
            '- OC mode: 1935 MHz (Boost)',
            '- Gaming mode: 1905 MHz (Boost)',
            'Memory size: 8GB GDDR6',
            'Memory bus: 256-bit',
            'Speed: 14Gbps',
            'Connections',
            '- 2 x HDMI 2.1',
            '- 3 x DisplayPort 1.4a',
            'Bus: PCIE 4.0',
            'Dimensions: 318.5 x 140.1 x 57.78 mm / 2.9 slots',
            'Weight: 1.73 kg',
            'OpenGL: Open GL 4.6',
            'HDCP support: HDCP 2.3',
            'Maximum digital resolution: 7680 x 4320',
            'Maximum supported impressions: 4',
            'Recommended power supply size: 750W',
            'Power connections: 2 x 8-pin '
        ]
    }
];

var _cart = [];

function populateCartList() {
    if (JSON.parse(sessionStorage.getItem("_cart")) != null) {
        _cart = JSON.parse(sessionStorage.getItem("_cart"));
    }
    if (!_cart.length) {
        generateCartItem(0, "NoItem", "Your cart is empty. Products will show up here after you added them.", "0");
    }
    else {
        for (let i = 0; i < _cart.length; i++) {
            generateCartItem(i, _data[parseInt(_cart[i])].image, _data[parseInt(_cart[i])].name, _data[parseInt(_cart[i])].price);
        }
    }
    updatePriceNCart();
}

function updatePriceNCart() {
    let totalPrice = 0;
    for (let i = 0; i < _cart.length; i++) {
        totalPrice += parseInt(_data[parseInt(_cart[i])].price);
    }
    document.getElementById('sumPrice').textContent = "TOTAL: " + totalPrice + " €";
    let cartCount = document.getElementById("CartLink");
    cartCount.textContent = " Cart: ";
    if (_cart.length <= 0) {
        cartCount.textContent += ("0");
    }
    else {
        cartCount.textContent += (_cart.length);
    }
}

function removeFromCart(removeID) {
    _cart.splice(removeID, 1);
    sessionStorage.setItem("_cart", JSON.stringify(_cart));
    document.getElementById(removeID).remove();
    //
    let _cartElementList = document.getElementsByClassName("ListItem");
    for (let i = removeID; i < _cartElementList.length; i++) {
        let _newid = parseInt(_cartElementList[i].id) - 1;
        _cartElementList[i].id = _newid;
        _cartElementList[i].getElementsByClassName("RemoveBtn")[0].onclick = function () { removeFromCart(_newid) };
    }
    //
    if (_cart.length <= 0) {
        generateCartItem(0, "NoItem", "Your cart is empty. Products will show up here after you added them.", "0");
    }
    updatePriceNCart();
}

function generateCartItem(_itemID, _imagePath, _itemName, _itemPrice) {

    let cartItem = document.createElement('div');
    cartItem.classList.add('ListItem');
    cartItem.id = _itemID;

    let itemDivider = document.createElement('hr');

    let itemInfo = document.createElement('div');
    itemInfo.classList.add('ItemInfo');

    let itemControl = document.createElement('div');
    itemControl.classList.add('ItemControl');

    cartItem.append(itemDivider);
    cartItem.append(itemInfo);
    itemInfo.append(itemControl);

    let titleHeading = document.createElement('h2');

    if (_imagePath != "NoItem") {
        let image = document.createElement('img');
        image.classList.add('ItemImg');
        image.src = _imagePath;
        itemControl.append(image);

        let removeButton = document.createElement('button');
        removeButton.classList.add('RemoveBtn');
        removeButton.append(document.createTextNode("Remove"));
        removeButton.onclick = function () { removeFromCart(parseInt(_itemID)) };

        let itemPrice = document.createElement('div');

        let titleHeading2 = document.createElement('h2');
        titleHeading2.append(document.createTextNode(_itemPrice + "€"));

        let titleLink = document.createElement('a');
        titleLink.classList.add('ItemTitle');
        titleLink.href = "productpage.html";
        titleLink.append(document.createTextNode(_itemName));
        titleLink.onclick = function () { setPageReferer(_cart[parseInt(_itemID)]) };

        console.log(_itemID);

        itemControl.append(titleHeading);
        titleHeading.append(titleLink);
        itemControl.append(removeButton);
        itemInfo.append(itemPrice);
        titleHeading.append(titleLink);
        itemPrice.append(titleHeading2);
    }
    else {
        titleHeading.append(document.createTextNode(_itemName));
        itemControl.append(titleHeading);
    }

    document.getElementById('ItemList').append(cartItem);
}

function setPageReferer(_ID) {
    sessionStorage.setItem("_referer", _ID.toString());
}